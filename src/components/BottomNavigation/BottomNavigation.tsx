import { useLocation, useNavigate, useSearchParams } from "react-router-dom";
import {
  BottomNavigationContainer,
  BottomNavigationItem,
  BottomNavigationSection,
} from "./BottomNavigation.styles";

const BottomNavigation: React.FC = () => {
  const navigate = useNavigate();
  const location = useLocation();
  const [params] = useSearchParams();

  const navLinks = [
    { name: "about", path: "/about" },
    { name: "the game", path: "/the-game" },
    { name: "survey", path: "/survey" },
    { name: "who we are", path: "/who-we-are" },
  ];

  return (
    <BottomNavigationContainer>
      <BottomNavigationItem
        onClick={() => navigate("/map")}
        isActive={location.pathname === "/map"}
        aria-label="map"
      >
        <svg
          style={{ width: "1.875rem", height: "2.313rem" }}
          viewBox="0 0 30 37"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M10.7968 4.06276C11.8408 3.07151 13.1939 2.48166 14.6676 2.48166C16.1136 2.48886 17.5008 3.05547 18.5383 4.06276C19.1366 4.63446 19.6185 5.31665 19.9573 6.07163C20.056 6.29121 20.2349 6.46471 20.4575 6.55653C20.68 6.64834 20.9292 6.6515 21.154 6.56537C24.2408 6.32604 27.077 8.77023 27.4237 12.2754C27.6612 14.6687 26.6586 16.8736 25.0097 18.1701C24.8323 18.3103 24.7112 18.5096 24.6686 18.7317C24.582 18.9245 24.5627 19.1409 24.6139 19.346C24.7897 20.0426 24.847 20.7637 24.7835 21.4793C24.5197 24.502 21.6345 26.6183 19.0321 26.3545C18.0295 26.2527 17.3247 26.0869 16.797 25.7797C16.4194 25.5609 16.0858 25.2444 15.7992 24.7306V18.0911L20.0525 15.5395C20.1587 15.4759 20.2513 15.392 20.3251 15.2927C20.3988 15.1933 20.4523 15.0803 20.4824 14.9603C20.5125 14.8402 20.5187 14.7154 20.5005 14.593C20.4824 14.4706 20.4403 14.3529 20.3767 14.2468C20.3131 14.1406 20.2292 14.048 20.1298 13.9742C20.0304 13.9004 19.9175 13.847 19.7974 13.8169C19.6774 13.7868 19.5526 13.7806 19.4301 13.7988C19.3077 13.8169 19.1901 13.859 19.0839 13.9226L15.7992 15.8938V10.9621C15.7992 10.7122 15.6999 10.4725 15.5232 10.2958C15.3465 10.1191 15.1069 10.0198 14.857 10.0198C14.6071 10.0198 14.3674 10.1191 14.1907 10.2958C14.014 10.4725 13.9147 10.7122 13.9147 10.9621V20.6069L10.63 18.6357C10.4156 18.5073 10.159 18.4693 9.91653 18.5301C9.67409 18.5909 9.46573 18.7455 9.33728 18.9599C9.20883 19.1743 9.17082 19.431 9.2316 19.6734C9.29239 19.9158 9.447 20.1242 9.66141 20.2526L13.9147 22.8024V23.9653C13.8418 24.0626 13.7883 24.1731 13.7574 24.2909C13.4276 25.0749 13.0205 25.5046 12.5475 25.7797C12.018 26.0869 11.315 26.2527 10.3106 26.3545C7.70812 26.6183 4.82296 24.502 4.55913 21.4793C4.49567 20.7637 4.55301 20.0426 4.72873 19.346C4.7801 19.1417 4.76153 18.9261 4.67596 18.7336C4.63451 18.5187 4.51955 18.3171 4.33299 18.1701C2.68594 16.8736 1.68338 14.6687 1.91895 12.2754C2.26758 8.774 5.09432 6.33169 8.17924 6.56348C8.40403 6.6503 8.65353 6.6477 8.87645 6.55622C9.09938 6.46473 9.27878 6.29132 9.37778 6.07163C9.72641 5.30087 10.2126 4.61868 10.7968 4.06276ZM13.9147 27.1338C13.7798 27.2342 13.6388 27.3268 13.4916 27.4117C12.6078 27.9243 11.5789 28.1221 10.5009 28.2314C6.89402 28.597 3.04211 25.7533 2.68405 21.6432C2.61529 20.8752 2.65398 20.1014 2.79901 19.3441C0.863628 17.6217 -0.238803 14.9382 0.0438718 12.0926C0.467884 7.81479 3.90709 4.54519 7.9776 4.66579C8.38654 3.92896 8.90101 3.26373 9.49839 2.6965C10.8863 1.35639 12.7383 0.604258 14.6676 0.597168C16.5969 0.604258 18.4488 1.35639 19.8367 2.6965C20.44 3.27327 20.9527 3.93782 21.3575 4.66768C25.4299 4.5433 28.8748 7.81102 29.2988 12.0907C29.5815 14.9382 28.479 17.6217 26.5437 19.346C26.6893 20.1032 26.7286 20.877 26.6605 21.6451C26.3024 25.7533 22.4505 28.597 18.8436 28.2314C17.7657 28.1221 16.7367 27.9243 15.851 27.4117C15.8337 27.4016 15.8164 27.3914 15.7992 27.3812V35.4605C15.7992 35.7104 15.6999 35.9501 15.5232 36.1268C15.3465 36.3035 15.1069 36.4028 14.857 36.4028C14.6071 36.4028 14.3674 36.3035 14.1907 36.1268C14.014 35.9501 13.9147 35.7104 13.9147 35.4605V27.1338Z"
            fill="#00171F"
          />
        </svg>
      </BottomNavigationItem>
      <BottomNavigationSection>
        {navLinks.map((link) => (
          <BottomNavigationItem
            key={link.name}
            onClick={() => navigate(link.path)}
            isActive={location.pathname === link.path}
          >
            {link.name}
          </BottomNavigationItem>
        ))}
      </BottomNavigationSection>
      <BottomNavigationItem
        onClick={() => navigate("/map?how-to-navigate=true")}
        isActive={params.get("how-to-navigate") === "true"}
        aria-label="how-to-navigate"
      >
        <svg
          style={{ width: "1.269rem", height: "2.269rem" }}
          viewBox="0 0 21 41"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M5.15127 36.2097L9.58758 31.5125L13.8673 36.2097L9.431 40.7504L5.15127 36.2097ZM5.88195 16.1159C3.48112 15.2808 0.349609 13.2975 0.349609 8.49583C0.349609 2.49376 5.41223 0.249512 10.2661 0.249512C18.0427 0.249512 20.6523 5.25993 20.6523 8.49583C20.6523 13.1409 17.9905 15.2808 15.0155 17.8382C10.527 21.6482 9.84854 25.4582 10.5792 29.4248H8.1262C7.39552 27.2327 7.03017 25.3538 7.03017 23.7359C7.03017 15.2808 15.4853 14.1326 15.4853 7.55638C15.4853 5.57309 14.2849 2.49376 10.2139 2.49376C6.8736 2.49376 5.20346 4.37267 5.20346 6.98226C5.20346 9.59186 6.97798 11.0532 8.64812 11.5752L5.88195 16.1159Z"
            fill="#00171F"
          />
        </svg>
      </BottomNavigationItem>
    </BottomNavigationContainer>
  );
};

export default BottomNavigation;
